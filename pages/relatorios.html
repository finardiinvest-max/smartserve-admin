<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartServe - Relatório de Taxas</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="dashboard">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>SmartServe</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="../dashboard.html" class="nav-item">Dashboard</a>
                <a href="produtos.html" class="nav-item">Produtos</a>
                <a href="pedidos.html" class="nav-item">Pedidos</a>
                <a href="relatorios.html" class="nav-item active">Relatórios</a>
                <a href="configuracoes.html" class="nav-item">Configurações</a>
            </nav>
            <div class="sidebar-footer">
                <button id="logoutBtn" class="btn btn-secondary">Sair</button>
            </div>
        </aside>
        
        <main class="main-content">
            <header class="content-header">
                <h1>Relatório de Taxas de Conveniência</h1>
            </header>
            
            <!-- Filtros -->
            <div class="filters-card">
                <div class="filters">
                    <div class="filter-group">
                        <label for="periodo">Período:</label>
                        <select id="periodo">
                            <option value="diario">Diário</option>
                            <option value="semanal" selected>Semanal</option>
                            <option value="mensal">Mensal</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="dataReferencia">Data de Referência:</label>
                        <input type="date" id="dataReferencia">
                    </div>
                    
                    <button id="btnGerar" class="btn btn-primary">Gerar Relatório</button>
                </div>
            </div>
            
            <!-- Loading -->
            <div id="loading" class="loading" style="display: none;">
                <p>Carregando relatório...</p>
            </div>
            
            <!-- Resumo -->
            <div id="resumo" class="stats-grid" style="display: none;">
                <div class="stat-card">
                    <h3>Total de Pedidos</h3>
                    <p class="stat-value" id="totalPedidos">0</p>
                </div>
                
                <div class="stat-card">
                    <h3>Pedidos com Taxa</h3>
                    <p class="stat-value" id="pedidosComTaxa">0</p>
                </div>
                
                <div class="stat-card">
                    <h3>Total em Taxas</h3>
                    <p class="stat-value" id="totalTaxas">R$ 0,00</p>
                </div>
                
                <div class="stat-card">
                    <h3>Taxa Média</h3>
                    <p class="stat-value" id="taxaMedia">R$ 0,00</p>
                </div>
            </div>
            
            <!-- Detalhamento -->
            <div id="detalhamento" class="card" style="display: none;">
                <div class="card-header">
                    <h2>Detalhamento por Dia</h2>
                </div>
                <div class="card-content">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Total de Pedidos</th>
                                <th>Pedidos com Taxa</th>
                                <th>Total em Taxas</th>
                            </tr>
                        </thead>
                        <tbody id="detalhesBody">
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Mensagem quando não há dados -->
            <div id="semDados" class="empty-state" style="display: none;">
                <p>Nenhum dado encontrado para o período selecionado.</p>
                <p class="text-muted">Tente selecionar outro período ou verifique se a taxa de conveniência está habilitada.</p>
            </div>
        </main>
    </div>
    
    <script src="../js/config.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/relatorios.js"></script>
</body>
</html>
